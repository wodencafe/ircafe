spring:
  application:
    name: "ircafe"
  main:
    headless: false
  config:
    # Load runtime state/config after application.yml so it can override defaults.
    # This file is also where we persist changes like auto-join channels and nick.
    import: "optional:file:${ircafe.runtime-config:${user.home}/.config/ircafe/ircafe.yml}"

ircafe:
  ui:
    # Timestamp prefix shown for status/error lines in the chat transcript.
    # Format uses Java time patterns (ex: "HH:mm:ss", "HH:mm", "h:mm a").
    timestamps:
      enabled: true
      format: "HH:mm:ss"

    # If enabled, IRCafe will prepend a timestamp to regular user chat message lines.
    # Default: false (preserve classic IRC look).
    chatMessageTimestampsEnabled: false


    # Inline image embedding (direct links to .png/.jpg/.gif/.webp). Default: OFF.
    imageEmbedsEnabled: false

    # Maximum width cap for inline image embeds (pixels). If 0, no extra cap (only scales down to fit the viewport).
    imageEmbedsMaxWidthPx: 0

    # Maximum height cap for inline image embeds (pixels). If 0, no extra cap.
    imageEmbedsMaxHeightPx: 0

    # Enable animated GIF playback for inline images. If false, GIFs render as a still first frame.
    imageEmbedsAnimateGifs: true

    # Collapse presence noise in channel logs (join/part/quit/nick) into Lounge-style fold blocks.
    # Default: true.
    presenceFoldsEnabled: true

    # Nick color section
    nickColoringEnabled: true
    nickColorMinContrast: 4.5   # 4.5 is a solid default
    # Optional: custom palette (hex strings). If omitted, uses built-in 32-color palette.
    # nickColors:
    #   - "#E57373"
    #   - "#64B5F6"
    #   ...

    # Optional: per-nick overrides (case-insensitive keys)
    nickColorOverrides:
        "NickServ": "#FFB300"
        "ChanServ": "#26A69A"

irc:
  client:
    version: "${IRCAFE_CTCP_VERSION:IRCafe}"

    # Auto-reconnect policy (client-side). These defaults are safe for most setups.
    reconnect:
      enabled: true
      # First retry delay.
      initialDelayMs: 1000
      # Maximum delay between retries.
      maxDelayMs: 120000
      # Exponential backoff multiplier.
      multiplier: 2.0
      # Random +/- jitter (0.0 - 0.75) applied to the computed delay.
      jitterPct: 0.20
      # 0 = infinite attempts.
      maxAttempts: 0

  servers:
    - id: "libera"
      host: "irc.libera.chat"
      port: 6697
      tls: true
      serverPassword: "${IRCAFE_SERVER_PASSWORD:}"
      nick: "${IRCAFE_NICK:IRCafeUser}"
      login: "${IRCAFE_IDENT:ircafe}"
      realName: "${IRCAFE_REALNAME:IRCafe User}"

      sasl:
        enabled: false
        username: "${IRCAFE_SASL_USERNAME:}"
        password: "${IRCAFE_SASL_PASSWORD:}"
        mechanism: "PLAIN"

      autoJoin:
        - "#test"
